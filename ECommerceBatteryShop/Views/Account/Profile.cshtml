@{
    Layout = "_Layout";
    ViewData["Title"] = "Profil";

    var rawName = User?.Identity?.IsAuthenticated == true
       ? (string.IsNullOrWhiteSpace(User.Identity?.Name) ? "Değerli Müşteri" : User.Identity!.Name)
       : "Misafir Kullanıcı";

    var displayName = rawName.Replace("-", "").Trim();


    var orders = new[]
    {
        new { Id = "ORD-1023", Date = "15 Mart 2024", Status = "Hazırlanıyor", BadgeClass = "bg-amber-100 text-amber-700", Total = "₺1.299,00", Items = "3 ürün" },
        new { Id = "ORD-0987", Date = "08 Mart 2024", Status = "Kargoya Verildi", BadgeClass = "bg-blue-100 text-blue-700", Total = "₺899,00", Items = "2 ürün" },
        new { Id = "ORD-0876", Date = "21 Şubat 2024", Status = "Teslim Edildi", BadgeClass = "bg-emerald-100 text-emerald-700", Total = "₺2.450,00", Items = "4 ürün" }
    };

    var transactions = new[]
    {
        new { Title = "Kredi Kartı Ödemesi", Amount = "-₺1.299,00", Date = "15 Mart 2024", Status = "Tamamlandı", StatusClass = "text-emerald-600" },
        new { Title = "İade Ücreti", Amount = "+₺249,00", Date = "02 Mart 2024", Status = "İade Tamamlandı", StatusClass = "text-blue-600" },
        new { Title = "Kapıda Ödeme", Amount = "-₺899,00", Date = "25 Şubat 2024", Status = "Beklemede", StatusClass = "text-amber-600" }
    };
}

<section class="bg-gray-50 py-12">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
        <div class="mb-10 flex flex-wrap items-center justify-between gap-4">
            <div>
                <p class="text-sm font-semibold uppercase tracking-wide text-amber-500">Hesap Merkezi</p>
                <h1 class="mt-2 text-3xl font-bold text-gray-900">Merhaba, @displayName!</h1>
                <p class="mt-1 text-sm text-gray-600">Siparişlerinizi takip edin, ödemelerinizi yönetin ve profil bilgilerinizi güncelleyin.</p>
            </div>
            <a href="/Product/Index"
               class="inline-flex items-center gap-2 rounded-full bg-amber-300 px-6 py-3 text-sm font-semibold text-gray-900 shadow-sm transition hover:bg-amber-400 hover:shadow-lg">
                <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 5v14" />
                    <path d="M5 12h14" />
                </svg>
                Yeni Ürünleri Keşfet
            </a>
        </div>

        <div class="grid gap-8 lg:grid-cols-[320px,1fr]">
            <!-- Sol panel -->
            <aside class="space-y-6">
                <div class="rounded-2xl bg-white p-6 shadow-sm ring-1 ring-black/5">
                    <div class="flex items-center gap-4">
                        <div class="grid h-16 w-16 place-items-center rounded-full bg-amber-100 text-2xl font-semibold text-amber-600">
                            @(string.IsNullOrWhiteSpace(displayName) ? "?" : displayName.Trim().Substring(0, 1).ToUpperInvariant())
                        </div>
                        <div>
                            <p class="text-sm font-medium text-gray-500">Üyelik</p>
                            <p class="text-lg font-semibold text-gray-900">@displayName</p>
                            <p class="text-sm text-gray-500">Premium müşteri • 12 ay</p>
                        </div>
                    </div>

                    <dl class="mt-6 grid grid-cols-2 gap-4 text-sm">
                        <div class="rounded-xl bg-gray-50 p-4">
                            <dt class="text-gray-500">Aktif Sipariş</dt>
                            <dd class="mt-1 text-lg font-semibold text-gray-900">2</dd>
                        </div>
                        <div class="rounded-xl bg-gray-50 p-4">
                            <dt class="text-gray-500">Toplam Harcama</dt>
                            <dd class="mt-1 text-lg font-semibold text-gray-900">₺12.840</dd>
                        </div>
                        <div class="rounded-xl bg-gray-50 p-4">
                            <dt class="text-gray-500">Bekleyen İade</dt>
                            <dd class="mt-1 text-lg font-semibold text-gray-900">1</dd>
                        </div>
                        <div class="rounded-xl bg-gray-50 p-4">
                            <dt class="text-gray-500">Puanlar</dt>
                            <dd class="mt-1 text-lg font-semibold text-gray-900">420</dd>
                        </div>
                    </dl>
                </div>

                <nav class="rounded-2xl bg-white p-6 shadow-sm ring-1 ring-black/5">
                    <p class="text-xs font-semibold uppercase tracking-wide text-gray-400">Hızlı erişim</p>
                    <ul class="mt-4 space-y-2 text-sm">
                        <li>
                            <a href="#orders" class="group flex items-center justify-between rounded-xl px-4 py-3 transition hover:bg-gray-50">
                                <span class="flex items-center gap-3 text-gray-700 group-hover:text-gray-900">
                                    <svg class="h-4 w-4 text-amber-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M3 7h18M3 12h18M3 17h18" />
                                    </svg>
                                    Siparişlerim
                                </span>
                                <svg class="h-4 w-4 text-gray-400 group-hover:text-amber-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M9 5l7 7-7 7" />
                                </svg>
                            </a>
                        </li>
                        <li>
                            <a href="/Account/Settings" class="group flex items-center justify-between rounded-xl px-4 py-3 transition hover:bg-gray-50">
                                <span class="flex items-center gap-3 text-gray-700 group-hover:text-gray-900">
                                    <svg class="h-4 w-4 text-amber-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                                        <circle cx="12" cy="12" r="3" />
                                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9c0 .66.26 1.3.73 1.77.47.47 1.11.73 1.77.73H21a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z" />
                                    </svg>
                                    Ayarlar
                                </span>
                                <svg class="h-4 w-4 text-gray-400 group-hover:text-amber-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M9 5l7 7-7 7" />
                                </svg>
                            </a>
                        </li>
                        <li>
                            <a href="#wallet" class="group flex items-center justify-between rounded-xl px-4 py-3 transition hover:bg-gray-50">
                                <span class="flex items-center gap-3 text-gray-700 group-hover:text-gray-900">
                                    <svg class="h-4 w-4 text-amber-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M2 7h20v10H2z" />
                                        <path d="M16 7V5a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v2" />
                                    </svg>
                                    Cüzdan & İşlemler
                                </span>
                                <svg class="h-4 w-4 text-gray-400 group-hover:text-amber-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M9 5l7 7-7 7" />
                                </svg>
                            </a>
                        </li>
                    </ul>
                </nav>
            </aside>

            <!-- Sağ içerik -->
            <div class="space-y-8">
                <section id="orders" class="rounded-2xl bg-white p-6 shadow-sm ring-1 ring-black/5">
                    <div class="flex flex-wrap items-center justify-between gap-4">
                        <div>
                            <h2 class="text-lg font-semibold text-gray-900">Son Siparişler</h2>
                            <p class="text-sm text-gray-500">Son 90 güne ait siparişlerinizi görüntüleyin ve takip edin.</p>
                        </div>
                        <a href="/Account/Profile#orders" class="inline-flex items-center gap-2 text-sm font-semibold text-amber-600 hover:text-amber-700">
                            Tüm siparişleri gör
                            <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M9 5l7 7-7 7" />
                            </svg>
                        </a>
                    </div>

                    <div class="mt-6 space-y-4">
                        @foreach (var order in orders)
                        {
                            <article class="rounded-xl border border-gray-100 p-4 transition hover:border-amber-200 hover:shadow-md">
                                <div class="flex flex-wrap items-center justify-between gap-4">
                                    <div>
                                        <p class="text-sm font-semibold text-gray-900">@order.Id</p>
                                        <p class="text-xs text-gray-500">@order.Date • @order.Items</p>
                                    </div>
                                    <span class="inline-flex items-center rounded-full px-3 py-1 text-xs font-medium @order.BadgeClass">@order.Status</span>
                                    <p class="text-base font-semibold text-gray-900">@order.Total</p>
                                </div>
                                <div class="mt-3 flex flex-wrap items-center gap-3 text-xs text-gray-500">
                                    <a href="/Cart/Index" class="inline-flex items-center gap-1 text-amber-600 hover:text-amber-700">
                                        Sipariş detayını aç
                                        <svg class="h-3.5 w-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M9 5l7 7-7 7" />
                                        </svg>
                                    </a>
                                    <span aria-hidden="true">•</span>
                                    <button type="button" class="inline-flex items-center gap-1 text-gray-500 transition hover:text-gray-700">
                                        Takip et
                                        <svg class="h-3.5 w-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M12 5v14M5 12h14" />
                                        </svg>
                                    </button>
                                </div>
                            </article>
                        }
                    </div>
                </section>

                <section id="wallet" class="rounded-2xl bg-white p-6 shadow-sm ring-1 ring-black/5">
                    <div class="flex flex-wrap items-center justify-between gap-4">
                        <div>
                            <h2 class="text-lg font-semibold text-gray-900">Cüzdan & İşlem Geçmişi</h2>
                            <p class="text-sm text-gray-500">Ödemelerinizi ve iadelerinizi buradan takip edin.</p>
                        </div>
                        <button type="button" class="inline-flex items-center gap-2 rounded-full bg-amber-300 px-4 py-2 text-sm font-semibold text-gray-900 shadow-sm transition hover:bg-amber-400">
                            Bakiye Yükle
                            <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M12 5v14" />
                                <path d="M5 12h14" />
                            </svg>
                        </button>
                    </div>

                    <div class="mt-6 grid gap-4 lg:grid-cols-3">
                        <div class="rounded-xl bg-gray-50 p-4">
                            <p class="text-sm text-gray-500">Cüzdan Bakiyesi</p>
                            <p class="mt-2 text-2xl font-semibold text-gray-900">₺720,00</p>
                            <p class="mt-1 text-xs text-gray-500">Son güncelleme 12 Mart 2024</p>
                        </div>
                        <div class="rounded-xl bg-gray-50 p-4">
                            <p class="text-sm text-gray-500">Son Ödeme</p>
                            <p class="mt-2 text-lg font-semibold text-gray-900">Mastercard •••• 9245</p>
                            <p class="mt-1 text-xs text-gray-500">₺1.299,00 • 15 Mart 2024</p>
                        </div>
                        <div class="rounded-xl bg-gray-50 p-4">
                            <p class="text-sm text-gray-500">Bekleyen Fatura</p>
                            <p class="mt-2 text-lg font-semibold text-gray-900">₺0,00</p>
                            <p class="mt-1 text-xs text-gray-500">Güncel fatura bulunmuyor.</p>
                        </div>
                    </div>

                    <div class="mt-6 space-y-3">
                        @foreach (var transaction in transactions)
                        {
                            <div class="flex flex-wrap items-center justify-between gap-3 rounded-xl border border-gray-100 bg-white px-4 py-3 text-sm">
                                <div>
                                    <p class="font-medium text-gray-900">@transaction.Title</p>
                                    <p class="text-xs text-gray-500">@transaction.Date</p>
                                </div>
                                <p class="font-semibold text-gray-900">@transaction.Amount</p>
                                <span class="text-xs font-medium @transaction.StatusClass">@transaction.Status</span>
                            </div>
                        }
                    </div>
                </section>

                <section class="rounded-2xl bg-white p-6 shadow-sm ring-1 ring-black/5">
                    <div class="flex flex-wrap items-center justify-between gap-4">
                        <div>
                            <h2 class="text-lg font-semibold text-gray-900">Adresler & Fatura Bilgileri</h2>
                            <p class="text-sm text-gray-500">Teslimat adreslerinizi ve fatura bilgilerinizi yönetin.</p>
                        </div>
                        <button type="button"
                                @@click="$store.address.openNew()"
                                class="inline-flex items-center gap-2 rounded-full border border-amber-400 px-4 py-2 text-sm font-semibold text-amber-600 hover:border-amber-700 hover:text-amber-700">
                            Yeni adres ekle
                            <svg class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
                                <path d="M12 5v14" />
                                <path d="M5 12h14" />
                            </svg>
                        </button>
                    </div>

                    <div class="mt-6 grid gap-4 md:grid-cols-2">
                        <div class="rounded-xl border border-gray-100 p-4">
                            <p class="text-sm font-semibold text-gray-900">Ev Adresi</p>
                            <p class="mt-1 text-sm text-gray-600">Ataköy Mah./ İstanbul</p>
                            <div class="mt-4 flex gap-2 text-xs">
                                <button type="button" class="rounded-full border border-gray-200 px-3 py-1 text-gray-600 transition hover:border-amber-300 hover:text-amber-600">Düzenle</button>
                                <button type="button" class="rounded-full border border-gray-200 px-3 py-1 text-gray-600 transition hover:border-amber-300 hover:text-amber-600">Varsayılan Yap</button>
                            </div>
                        </div>
                        <div class="rounded-xl border border-gray-100 p-4">
                            <p class="text-sm font-semibold text-gray-900">İş Adresi</p>
                            <p class="mt-1 text-sm text-gray-600">Teknopark İstanbul</p>
                            <div class="mt-4 flex gap-2 text-xs">
                                <button type="button" class="rounded-full border border-gray-200 px-3 py-1 text-gray-600 transition hover:border-amber-300 hover:text-amber-600">Düzenle</button>
                                <button type="button" class="rounded-full border border-gray-200 px-3 py-1 text-gray-600 transition hover:border-amber-300 hover:text-amber-600">Varsayılan Yap</button>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="support" class="rounded-2xl bg-gradient-to-br from-gray-900 via-gray-800 to-black p-6 text-white shadow-sm">
                    <div class="flex flex-wrap items-center justify-between gap-4">
                        <div>
                            <h2 class="text-lg font-semibold">Yardıma mı ihtiyacınız var?</h2>
                            <p class="mt-1 text-sm text-gray-300">7/24 destek hattımızdan bize ulaşabilirsiniz. Ortalama yanıt süresi 15 dakikadır.</p>
                        </div>
                        <a href="https://api.whatsapp.com/send/?phone=905013176653" class="inline-flex items-center gap-2 rounded-full bg-amber-300 px-4 py-2 text-sm font-semibold text-gray-900 shadow-sm transition hover:bg-amber-400">
                            Destek ile iletişime geç
                            <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" />
                            </svg>
                        </a>
                    </div>
                </section>
            </div>
        </div>
    </div>
</section>
@await Html.PartialAsync("_AddressModalPartial")
