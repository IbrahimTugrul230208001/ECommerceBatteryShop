<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - ECommerceBatteryShop</title>
    <link rel="stylesheet" href="~/css/output.css"/>
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
</head>
<body>
    <header>
        <!-- NAVBAR -->

        <nav x-data="{ scrolled:false }"
             @@scroll.window.passive ="scrolled = window.scrollY > 0"
             class="fixed top-0 inset-x-0 z-50 bg-gray-900 text-white transition-shadow duration-200 h-20"
             :class="scrolled ? 'shadow-md bg-gray-900/90 backdrop-blur' : ''">
            <div class="mx-auto max-w-7xl px-4 h-full flex items-center gap-4">
                <!-- Logo -->
                <a asp-controller="Home" asp-action="Index"
                   class="flex-none text-xl font-bold hover:text-gray-300">
                    <img src="~/img/logo.png" alt="Logo" class="h-16 w-auto object-contain" />
                </a>

                <!-- Search -->
                <form hx-get="/Search" hx-target="#search-results" hx-push-url="true" role="search" class="flex-1">
                    <div class="mx-auto max-w-3xl">
                        <div class="flex h-10 rounded-md border border-gray-300 bg-white overflow-hidden
                            focus-within:ring-2 focus-within:ring-yellow-300 focus-within:border-yellow-300 relative">
                            <svg class="absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-500 pointer-events-none"
                                 xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <circle cx="11" cy="11" r="7" stroke-width="2" />
                                <path d="M21 21l-4.3-4.3" stroke-width="2" />
                            </svg>
                            <input name="q" placeholder="Search..."
                                   class="flex-1 pl-10 pr-3 text-black placeholder-gray-500 focus:outline-none" />
                            <button type="submit" aria-label="Search"
                                    class="px-4 flex items-center justify-center bg-yellow-300 cursor-pointer hover:bg-yellow-400">
                                <svg class="h-6 w-6" viewBox="0 0 24 24" id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" fill="#000000">
                                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                    <g id="SVGRepo_iconCarrier">
                                        <defs>
                                            <style>
                                                .cls-1 {
                                                    fill: none;
                                                    stroke: #020202;
                                                    stroke-miterlimit: 10;
                                                    stroke-width: 1.91px;
                                                }</style>
                                        </defs><circle class="cls-1" cx="9.14" cy="9.14" r="7.64"></circle><line class="cls-1" x1="22.5" y1="22.5" x2="14.39" y2="14.39"></line>
                                    </g>
                                </svg>
                            </button>
                        </div>
                    </div>
                </form>

                <!-- Cart -->
                <a aria-label="Sepet"
                   class="group inline-flex items-center justify-center px-4 h-16
                  cursor-pointer rounded-md transition hover:bg-white/10
                  focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-amber-400">
                    <div class="relative inline-flex transition-transform duration-200 group-hover:scale-110 origin-center">
                        <svg class="h-10 w-10 text-white transition-colors duration-200 group-hover:text-yellow-300"
                             viewBox="0 0 24 24" fill="none">
                            <path d="M6.3 5H21L19 12H7.38M20 16H8L6 3H3M9 20a1 1 0 1 1-2 0a1 1 0 0 1 2 0ZM20 20a1 1 0 1 1-2 0a1 1 0 0 1 2 0Z"
                                  stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                        <span class="absolute -top-1 -right-1 min-w-[1.25rem] h-5 px-1 rounded-full text-xs
         bg-yellow-300 text-gray-900 flex items-center justify-center ring-1
         transition-colors duration-200 group-hover:scale-110">
                            @(ViewBag.CartCount ?? 0)
                        </span>
                    </div>
                </a>

                <div class="flex items-center ml-auto">
                    <a class="cursor-pointer px-4 py-2 rounded-md bg-yellow-300 border border-yellow-300 hover:bg-yellow-400 text-black font-medium">
                        Kayıt ol
                    </a>
                </div>
            </div>
        </nav>
        <div class="h-20"></div>


@{
    var categories = new[]
    {
        new {
            Text = "Perakende Pil",
            Url = "#",
            Children = new[]
            {
                new { Text = "AA Piller", Url = "/perakende-pil/aa" },
                new { Text = "AAA Piller", Url = "/perakende-pil/aaa" },
                new { Text = "Şarj Edilebilir", Url = "/perakende-pil/sarj" },
                new { Text = "Tümünü Gör", Url = "/perakende-pil/tumu" }
            }
        },
        new {
            Text = "Endüstriyel Pil",
            Url = Url.Action("Index", "Catalog", new { category = "endustriyel-pil" }),
            Children = Array.Empty<dynamic>()
        },
        new {
            Text = "Özel Pil Paketleri",
            Url = Url.Action("Index", "Catalog", new { category = "ozel-pil-paketleri" }),
            Children = Array.Empty<dynamic>()
        },
        new {
            Text = "Elektronik",
            Url = Url.Action("Index", "Catalog", new { category = "elektronik" }),
            Children = Array.Empty<dynamic>()
        },
        new {
            Text = "Pil Gruplama",
            Url = Url.Action("Index", "Catalog", new { category = "pil-gruplama" }),
            Children = Array.Empty<dynamic>()
        },
        new {
            Text = "Aküler",
            Url = Url.Action("Index", "Catalog", new { category = "akuler" }),
            Children = Array.Empty<dynamic>()
        },
        new {
            Text = "İletişim",
            Url = Url.Action("Contact", "Home"),
            Children = Array.Empty<dynamic>()
        }
    };
}
<div class="bg-gray-800 text-white">
    <div class="mx-auto max-w-7xl px-4">
        <ul class="h-12 flex items-center gap-8 overflow-x-auto whitespace-nowrap">
            <!-- (Optional) left caret icon just for visual parity -->
            <li class="opacity-80">
                <svg class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M7 10l5-5v10l-5-5z" />
                </svg>
            </li>
            @foreach (var item in categories)
            {
                var hasChildren = item.Children.Length > 0;
                if (hasChildren)
                {
                    <li class="relative" x-data="{open:false}" @mouseenter="open=true" @mouseleave="open=false" @keydown.escape="open=false">
                        <button type="button" @click="open = !open" class="relative font-semibold px-1 focus:outline-none after:absolute after:left-0 after:-bottom-1 after:h-[2px] after:w-full after:origin-left after:scale-x-0 after:bg-white after:transition-transform after:duration-300 hover:after:scale-x-100" :aria-expanded="open.toString()">
                            @item.Text
                        </button>
                        <div x-cloak x-show="open" x-transition class="absolute left-0 top-full z-50 w-64 bg-white text-gray-900 shadow-xl ring-1 ring-black/5 rounded-b-lg rounded-t-none">
                            <ul class="text-sm p-3 space-y-1">
                                @for (int i = 0; i < item.Children.Length; i++)
                                {
                                    var child = item.Children[i];
                                    var last = i == item.Children.Length - 1;
                                    <li class="@(last ? "pt-1 border-t font-medium" : string.Empty)">
                                        <a href="@child.Url" class="block rounded px-2 py-2 hover:bg-gray-100">@child.Text</a>
                                    </li>
                                }
                            </ul>
                        </div>
                    </li>
                }
                else
                {
                    <li>
                        <a href="@item.Url" class="relative font-semibold after:absolute after:left-0 after:-bottom-1 after:h-[2px] after:w-full after:origin-left after:scale-x-0 after:bg-white after:transition-transform after:duration-300 hover:after:scale-x-100">
                            @item.Text
                        </a>
                    </li>
                }
            }
        </ul>
    </div>
</div>

        <!-- Search results container -->
        <div id="search-results"></div>

    </header>
    <main class="max-w-7xl mx-auto px-4 py-6">
        @RenderBody()
    </main>
    <footer class="border-t text-center text-sm text-gray-500 py-4">
        &copy; 2025 - ECommerceBatteryShop - <a class="underline">Privacy</a>
    </footer>
    <script src="https://unpkg.com/htmx.org@1.9.12" defer></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
