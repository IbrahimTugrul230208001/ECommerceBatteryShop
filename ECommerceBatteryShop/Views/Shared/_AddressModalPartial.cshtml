<!-- Address Modal -->
<style>
    [x-cloak] {
        display: none !important
    }</style>
<div x-cloak x-data>
    <div x-show="$store.address.open" x-transition.opacity
         class="fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/40"
         role="dialog" aria-modal="true"
         @@keydown.window.escape="$store.address.close()">
        <div class="w-full max-w-lg rounded-md bg-white shadow-xl ring-1 ring-black/10"
             @@click.outside="$store.address.close()">
            <div class="flex items-center justify-between p-4 border-b border-slate-300">
                <h3 class="text-base font-semibold text-slate-600">Adres Ekle</h3>
                <button class="p-2 rounded text-slate-500 hover:bg-slate-100" @@click="$store.address.close()">✕</button>
            </div>

            <form class="p-4 space-y-4"
                  hx-post="/Address/Upsert"
                  hx-target="#address-list"
                  hx-swap="outerHTML"
                  x-on:htmx:afterOnLoad.window="$store.address.close()">

                <div>
                    <label class="block text-sm font-medium text-slate-700">Adres Adı</label>
                    <input name="AddressName" required
                           class="mt-1 p-2 w-full rounded-lg border border-slate-300 focus:ring-amber-300 focus:border-amber-300">
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700">Ad *</label>
                        <input name="Name" required
                               class="mt-1 p-2 w-full rounded-lg border border-slate-300 focus:ring-amber-300 focus:border-amber-300">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700">Soyad *</label>
                        <input name="Surname" required
                               class="mt-1 p-2 w-full rounded-lg border border-slate-300 focus:ring-amber-300 focus:border-amber-300">
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700">Telefon *</label>
                        <input name="Phone" required placeholder="+90 5XX XXX XX XX"
                               class="mt-1 p-2 w-full rounded-lg border border-slate-300 focus:ring-amber-300 focus:border-amber-300">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700">İl *</label>
                        <input name="City" required
                               class="mt-1 p-2 w-full rounded-lg border border-slate-300 focus:ring-amber-300 focus:border-amber-300">
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium text-slate-700">Adres *</label>
                    <textarea name="Line" rows="3"
                              placeholder="Adresinizi mahalle, sokak, cadde, bina ve daire numarası ile beraber tam girdiğinize emin olun."
                              required
                              class="mt-1 w-full rounded-lg p-2 border border-slate-300 focus:ring-amber-300 focus:border-amber-300"></textarea>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700">İlçe *</label>
                        <input name="District" required
                               class="mt-1 p-2 w-full rounded-lg border border-slate-300 focus:ring-amber-300 focus:border-amber-300">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700">Mahalle *</label>
                        <input name="Neighborhood" required
                               class="mt-1 p-2 w-full rounded-lg border border-slate-300 focus:ring-amber-300 focus:border-amber-300">
                    </div>
                </div>

                <div class="flex items-center justify-end gap-2 pt-2">
                    <button type="button"
                            @@click="$store.address.close()"
                            class="rounded-lg border border-slate-400 px-4 py-2 text-sm text-slate-600 hover:bg-slate-100">
                        Vazgeç
                    </button>
                    <button type="submit"
                            class="rounded-lg bg-amber-300 px-4 py-2 text-sm font-semibold border border-amber-300 text-gray-900 hover:bg-amber-400">
                        Kaydet
                    </button>
                </div>
            </form>

        </div>
    </div>
</div>


<script>
    document.addEventListener('alpine:init', () => {
      Alpine.store('address', {
        open: false,
        openNew(){ this.open = true },
        close(){ this.open = false }
      });
    });
</script>