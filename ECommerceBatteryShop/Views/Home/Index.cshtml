@model IEnumerable<ECommerceBatteryShop.Models.Product>
@{
    ViewData["Title"] = "Home";
}


@{
    var products = new[]
    {
        new { Id = 1, Name = "PowerMax 5000 Battery", Price = 299.90m, ImageUrl = "/img/battery.jpg", Rating = 4 },
        new { Id = 2, Name = "EcoCharge AA Rechargeable Pack", Price = 79.50m, ImageUrl = "/img/battery.jpg", Rating = 5 },
        new { Id = 3, Name = "UltraLife Car Battery 12V", Price = 850.00m, ImageUrl = "/img/battery.jpg", Rating = 3 },
        new { Id = 4, Name = "MiniCell CR2032 Lithium", Price = 15.99m, ImageUrl = "/img/battery.jpg", Rating = 4 },
        new { Id = 5, Name = "VoltCore 9V Pro Pack", Price = 129.00m, ImageUrl = "/img/battery.jpg", Rating = 5 },
        new { Id = 6, Name = "SolarEdge Power Bank 20K", Price = 499.00m, ImageUrl = "/img/battery.jpg", Rating = 4 },
        new { Id = 7, Name = "HeavyDuty Truck Battery 24V", Price = 1490.00m, ImageUrl = "/img/battery.jpg", Rating = 4 },
        new { Id = 8, Name = "NanoCell AAA 24-Pack", Price = 59.90m, ImageUrl = "/img/battery.jpg", Rating = 3 }
    };
}

<style>
    .hide-scrollbar::-webkit-scrollbar {
        display: none;
    }

    .hide-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }
</style>

<div x-data="{
     atStart: true, atEnd: false,
     onScroll(){ const el=$refs.scroller; this.atStart=el.scrollLeft<=5; this.atEnd = el.scrollLeft+el.clientWidth>=el.scrollWidth-5; },
    next(){ const el=$refs.scroller; el.scrollBy({left: el.clientWidth, behavior:'smooth'}); },
    prev(){ const el=$refs.scroller; el.scrollBy({left: -el.clientWidth, behavior:'smooth'}); }
  }"
  x-init="onScroll()"
  class="relative"
>
  <!-- Controls -->
  <button type="button" @@click="prev" :class="{'opacity-40 pointer-events-none': atStart}"
          class="absolute left-2 top-1/2 hover:bg-amber-300 cursor-pointer -translate-y-1/2 z-10 h-10 w-10 grid place-items-center rounded-full bg-white shadow border">
    <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" transform="rotate(180)"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path fill-rule="evenodd" clip-rule="evenodd" d="M8.29289 4.29289C8.68342 3.90237 9.31658 3.90237 9.70711 4.29289L16.7071 11.2929C17.0976 11.6834 17.0976 12.3166 16.7071 12.7071L9.70711 19.7071C9.31658 20.0976 8.68342 20.0976 8.29289 19.7071C7.90237 19.3166 7.90237 18.6834 8.29289 18.2929L14.5858 12L8.29289 5.70711C7.90237 5.31658 7.90237 4.68342 8.29289 4.29289Z" fill="#000000"></path> </g></svg>
  </button>
  <button type="button" @@click="next" :class="{'opacity-40 pointer-events-none': atEnd}"
          class="absolute right-2 top-1/2 -translate-y-1/2 z-10 h-10 w-10 grid place-items-center text-xl rounded-full bg-white shadow border hover:bg-amber-300 cursor-pointer">
    <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path fill-rule="evenodd" clip-rule="evenodd" d="M8.29289 4.29289C8.68342 3.90237 9.31658 3.90237 9.70711 4.29289L16.7071 11.2929C17.0976 11.6834 17.0976 12.3166 16.7071 12.7071L9.70711 19.7071C9.31658 20.0976 8.68342 20.0976 8.29289 19.7071C7.90237 19.3166 7.90237 18.6834 8.29289 18.2929L14.5858 12L8.29289 5.70711C7.90237 5.31658 7.90237 4.68342 8.29289 4.29289Z" fill="#000000"></path> </g></svg>
  </button>

  <!-- Track -->
  <div x-ref="scroller"  style="--g:12px"  @@scroll.passive="onScroll"
     class="flex gap-[var(--g)] overflow-x-auto snap-x snap-mandatory scroll-smooth hide-scrollbar px-1 py-2">
    @foreach (var product in products)
    {
        <div class="flex-none min-w-0 lg:basis-[calc((100%-3*var(--g))/4)] md:basis-[calc((100%-2*var(--g))/3)] basis-[calc((100%-1*var(--g))/2)] snap-start">
                <article class="group h-72 flex flex-col rounded-xl border border-white/10 bg-white shadow-[0_4px_12px_rgba(0,0,0,0.12)]
                                  transition hover:shadow-[0_6px_16px_rgba(0,0,0,0.14)]">

                    <!-- Image -->
                    <a href="#" class="block p-3 pb-0">
                        <div class="h-32 grid place-items-center overflow-hidden">
                            <img src="@product.ImageUrl" alt="@product.Name"
                                 class="h-28 w-auto object-contain transition-transform duration-200 group-hover:scale-[1.03]" />
                        </div>
                    </a>

                    <!-- Content -->
                    <div class="px-3 pt-2 flex-1 flex flex-col">
                        <h3 class="text-sm font-semibold text-gray-900 line-clamp-2 min-h-[2.75rem]">
                            @product.Name
                        </h3>

                        <!-- Rating + Price -->
                        <div class="mt-1 flex items-center justify-between">
                            <div class="flex items-center gap-0.5 text-yellow-400" aria-label="Ürün puaný">
                                @for (var i = 0; i < 5; i++)
                                {
                                        if (i < product.Rating)
                                        {
                                                <svg class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2
                                                                     9.19 8.62 2 9.24l5.46 4.73L5.82 21z" />
                                                </svg>
                                        }
                                        else
                                        {
                                                <svg class="h-4 w-4 text-gray-300" viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2
                                                                     9.19 8.62 2 9.24l5.46 4.73L5.82 21z" />
                                                </svg>
                                        }
                                }
                            </div>
                            <div class="text-right">
                                <div class="text-lg font-bold text-gray-900">
                                    @product.Price.ToString("C")
                                </div>
                            </div>
                        </div>

                        <!-- Actions -->
                        <div class="mt-3 mb-3 flex items-center gap-2">
                            <button type="button" aria-label="Sepete ekle"
                                    class="flex-1 h-9 rounded-md bg-amber-300 text-gray-900 text-sm font-semibold
                                           shadow hover:bg-amber-400 focus-visible:outline-none
                                           focus-visible:ring-2 focus-visible:ring-yellow-400 cursor-pointer">
                                Sepete ekle
                            </button>

                            <button type="button" aria-label="Favorilere ekle"
                                    class="h-9 w-9 grid place-items-center rounded-md border border-gray-300
                                           text-gray-700 hover:bg-gray-100 cursor-pointer">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5"
                                     viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                     stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5
                                             5.5 0 0 0-7.78 7.78L12 21.23l8.84-8.84a5.5
                                             5.5 0 0 0 0-7.78z" />
                                </svg>
                            </button>
                        </div>
                    </div>
                </article>
            </div>
    }
  </div>
</div>


<script src="~/js/anasayfa.js"></script>